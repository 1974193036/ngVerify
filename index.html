<!DOCTYPE html>
<html lang="en" ng-app="APP">
<head>
	<meta charset="UTF-8">
	<title>指令与表单验证</title>

	<link rel="stylesheet" href="lib/bootstarp.min.css">
	<link rel="stylesheet" href="lib/angular-datepicker.css">

	<link rel="stylesheet" href="css/ngVerify.css">
	<link rel="stylesheet" href="css/style.css">
</head>
<body>
	<h1 class="PluginName">ngVerify</h2>
	<p class="Version">ver: 1.1.4</p>
	<div class="githubTag">
		<a class="github" href="https://github.com/Moerj/ngVerify" target="_blank">STAR ON GITHUB</a>
	</div>

	<div class="container" ng-controller="testCtrl">
		<!-- 表单验证 -->
		<form id="testform" name="loginForm" verify-scope>
			<div class="form-group">
				<label for="pickerMinDate">Time picker </label>
				<input class="form-control" date-time name="pickerMinDate" ng-model="dates.today" id="pickerMinDate"
				min-date="minDate" view="date" min-view="hours" placeholder="click here input"
				 ng-verify
				>
			</div>
			<div class="form-group">
			    <label for="Email">Email address </label>
				<!-- 只需要写上 ng-verify -->
			    <input type="email" class="form-control" id="Email" placeholder="input your email"
				 ng-verify
				>
			</div>
			<div class="form-group">
			    <label for="Password">Password </label>
				<!-- 自定义字符长度 -->
			    <input type="password" class="form-control" id="Password" placeholder="3 to 10 chars"
				 ng-verify="min:3, max:10"
				>
			</div>
			<div class="form-group">
			    <label for="phone">phone</label>
				<!-- 默认支持的type类型 -->
			    <input type="phone" class="form-control" id="phone" placeholder="your phone number"
				 ng-verify="min:11, required:false"
				>
			</div>
			<div class="form-group">
			    <label for="pattern">pattern</label>
				<!-- 自定义正则,并自定义错误消息 -->
			    <input type="text" class="form-control" id="pattern" placeholder="这里只能输入中文"
				 ng-verify=" pattern:/[\u4e00-\u9fa5]/, required:false, errmsg:'需要输入中文' "
				>
			</div>
			<div class="form-group">
			    <label for="select">select</label>
			    <select id="select" class="form-control"
				ng-model="myColor" ng-options="color.name for color in colors"
				 ng-verify
				 >
			    	<option value=""> choose color </option>
			    </select>
			</div>
			<div class="form-group">
				<label >checkbox</label>
				<!-- checkbox多选，请确保所有checkbox被一个div包起 -->
				<!-- 如果要用label修饰checkbox请统一所有都用 -->
				<!-- 确保每组checkbox的name属性相同，ng-verify指令只需要在任意一个checkbox上 -->
				<label class="checkbox-inline">
					<input type="checkbox" name="checkbox" > Captain America
				</label>
				<label class="checkbox-inline">
					<input type="checkbox" name="checkbox" > Iron Man
				</label>
				<label class="checkbox-inline">
					<input type="checkbox" name="checkbox"  ng-verify="least:2"> Hulk
				</label>
			</div>
			<div class="form-group">
				<label >radio</label>
				<!-- radio多选，请确保所有radio被一个div包起 -->
				<!-- 如果要用label修饰radio请统一所有都用 -->
				<!-- 确保每组radio的name属性相同，ng-verify指令只需要在任意一个radio上 -->
				<label class="radio-inline">
					<input type="radio" name="radio" > Batman
				</label>
				<label class="radio-inline">
					<input type="radio" name="radio" > Superman
				</label>
				<label class="radio-inline">
					<input type="radio" name="radio" ng-verify> Me
				</label>
			</div>

			<!-- 表单范围内的提交按钮, control:'loginForm' -->
			<a class="btn btn-block btn-primary" type="submit" ng-verify>提交</a>
		</form>

		<!-- 绑定一个指令范围外的按钮, control:'loginForm', 设置 disabled:false 可以使他可以不会因为校验失败而禁用 -->
		<button type="button" class="btn btn-warning outsideBtn" ng-verify="control:'loginForm', disabled:false" ng-click="check()">验证整个表单</button>
		<button type="button" class="btn btn-warning" ng-click="changeSelect(1)">select选择</button>
		<button type="button" class="btn btn-warning" ng-click="changeSelect()">select取消</button>

	</div>

</body>
</html>

<!-- qtip提示部分，正式版将会剔除 -->
<script src="lib/angular-v1.5.5.js"></script>
<script src="lib/angular-datepicker.js"></script>

<script src="js/ngVerify.js"></script>
<script type="text/javascript">
	// 使用ngVerify前，先依赖注入
	var app = angular.module('APP',['ngVerify','datePicker']);

	// 测试用控制器,调用公共方法的地方注入ngVerify
	app.controller('testCtrl',function ($scope, ngVerify) {

		// 这里的$scope只是控制器上的，和表单上verify指令的$scope无关
		// console.log($scope);

		// 想要拿到表单上的$scope 使用方法:
		// var verifyScope = verify.scope('loginForm')

		// angular.element(document).ready(function() {
		// 	console.log('页面加载完成，自动检测表单的验证，返回一个对象：');
		// 	var re = ngVerify.check('loginForm',true);
		// 	console.info(re);
		// });

		$scope.check = function () {
			console.log('你检测了表单的验证，返回给你一个对象：');
			var re = ngVerify.check('loginForm');
		    console.info(re);
		}

		// 以ngOptions方式写seclet
		$scope.colors = [
	      {name:'black', shade:'dark'},
	      {name:'white', shade:'light', notAnOption: true},
	      {name:'red', shade:'dark'},
	      {name:'blue', shade:'dark', notAnOption: true},
	      {name:'yellow', shade:'light', notAnOption: false}
	    ];

		$scope.changeSelect = function(i){
			if(i){
				$scope.myColor = $scope.colors[i];
			}else{
				$scope.myColor = null;
			}
		}

	})

</script>
